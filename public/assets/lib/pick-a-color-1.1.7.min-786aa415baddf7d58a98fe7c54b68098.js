!function(t){"use strict";t.fn.pickAColor=function(o){var e="ontouchstart"in window,a=(parseInt(t(window).width(),10)<767?!0:!1,"localStorage"in window&&null!==window.localStorage&&"object"==typeof JSON),n=document.all&&!window.atob,s=e?"touchstart.pickAColor":"mousedown.pickAColor",r=e?"touchmove.pickAColor":"mousemove.pickAColor",i=e?"touchend.pickAColor":"mouseup.pickAColor",l=e?"touchend.pickAColor":"click.pickAColor",d="dragging.pickAColor",c="endDrag.pickAColor",p=t.extend({showSpectrum:!0,showSavedColors:!0,saveColorsPerElement:!1,fadeMenuToggle:!0,showAdvanced:!0,showBasicColors:!0,showHexInput:!0,basicColors:{white:"fff",red:"f00",orange:"f60",yellow:"ff0",green:"008000",blue:"00f",purple:"800080",black:"000"}},o);p.showAdvanced||p.showBasicColors||(p.showBasicColors=!0);var u=p.showSavedColors&&p.showAdvanced||p.showBasicColors&&p.showSavedColors||p.showBasicColors&&p.showAdvanced,h=function(){var o=t("<div>").addClass("btn-group"),e=t("<button type='button'>").addClass("btn color-dropdown dropdown-toggle"),a=t("<span>").addClass("color-preview current-color"),s=t("<span>").addClass("caret"),r=t("<div>").addClass("color-menu dropdown-menu");if(p.showHexInput||(e.addClass("no-hex"),r.addClass("no-hex")),o.append(e.append(a).append(s)),u||p.showSpectrum||r.addClass("small"),u){var i=t("<div>").addClass("color-menu-tabs"),l=p.showBasicColors?"savedColors-tab tab":"savedColors-tab tab tab-active";p.showBasicColors&&i.append(t("<span>").addClass("basicColors-tab tab tab-active").append(t("<a>").text("Basic Colors"))),p.showSavedColors&&i.append(t("<span>").addClass(l).append(t("<a>").text("Saved Colors"))),p.showAdvanced&&i.append(t("<span>").addClass("advanced-tab tab").append(t("<a>").text("Advanced"))),r.append(i)}if(p.showBasicColors){var d=t("<div>").addClass("basicColors-content active-content");p.showSpectrum&&d.append(t("<h6>").addClass("color-menu-instructions").text("Tap spectrum or drag band to change color"));var c=t("<ul>").addClass("basic-colors-list");t.each(p.basicColors,function(o,e){var a=t("<li>").addClass("color-item"),s=t("<a>").addClass(o+" color-link"),r=t("<span>").addClass("color-preview "+o),i=t("<span>").addClass("color-label").text(o);if(s.append(r,i),r.append(),"#"!==e[0]&&(e="#"+e),r.css("background-color",e),p.showSpectrum){var l=t("<span>").addClass("color-box spectrum-"+o);n&&t.each([0,1],function(a){"fff"!==e&&"000"!==o&&l.append(t("<span>").addClass(o+"-spectrum-"+a+" ie-spectrum"))});var d=t("<span>").addClass("highlight-band");t.each([0,1,2],function(){d.append(t("<span>").addClass("highlight-band-stripe"))}),s.append(l.append(d))}c.append(a.append(s))}),r.append(d.append(c))}if(p.showSavedColors){var h=p.showBasicColors?"inactive-content":"active-content",g=t("<div>").addClass("savedColors-content").addClass(h);g.append(t("<p>").addClass("saved-colors-instructions").text("Type in a color or use the spectrums to lighten or darken an existing color.")),r.append(g)}if(p.showAdvanced){var v=p.showBasicColors||p.showSavedColors?"inactive-content":"active-content",f=t("<div>").addClass("advanced-content").addClass(v).append(t("<h6>").addClass("advanced-instructions").text("Tap spectrum or drag band to change color")),C=t("<ul>").addClass("advanced-list"),m=t("<li>").addClass("hue-item"),b=t("<span>").addClass("hue-text").text("Hue: ").append(t("<span>").addClass("hue-value").text("0")),w=t("<span>").addClass("color-box spectrum-hue");n&&t.each([0,1,2,3,4,5,6],function(o){w.append(t("<span>").addClass("hue-spectrum-"+o+" ie-spectrum hue"))});var S=t("<span>").addClass("highlight-band");t.each([0,1,2],function(){S.append(t("<span>").addClass("highlight-band-stripe"))}),C.append(m.append(b).append(w.append(S)));var y=t("<li>").addClass("lightness-item"),k=t("<span>").addClass("color-box spectrum-lightness"),x=t("<span>").addClass("lightness-text").text("Lightness: ").append(t("<span>").addClass("lightness-value").text("50%"));n&&t.each([0,1],function(o){k.append(t("<span>").addClass("lightness-spectrum-"+o+" ie-spectrum"))});var H=t("<span>").addClass("highlight-band");t.each([0,1,2],function(){H.append(t("<span>").addClass("highlight-band-stripe"))}),C.append(y.append(x).append(k.append(H)));var A=t("<li>").addClass("saturation-item"),B=t("<span>").addClass("color-box spectrum-saturation");n&&t.each([0,1],function(o){B.append(t("<span>").addClass("saturation-spectrum-"+o+" ie-spectrum"))});var I=t("<span>").addClass("highlight-band");t.each([0,1,2],function(){I.append(t("<span>").addClass("highlight-band-stripe"))});var M=t("<span>").addClass("saturation-text").text("Saturation: ").append(t("<span>").addClass("saturation-value").text("100%"));C.append(A.append(M).append(B.append(I)));var T=t("<li>").addClass("preview-item").append(t("<span>").addClass("preview-text").text("Preview")),P=t("<span>").addClass("color-preview advanced").append("<button class='color-select btn btn-mini advanced' type='button'>Select</button>");C.append(T.append(P)),r.append(f.append(C))}return o.append(r),o},g={},v={rowsInDropdown:8,maxColsInDropdown:2};if(p.showSavedColors){var f=[];if(a&&localStorage.allSavedColors)f=JSON.parse(localStorage.allSavedColors);else if(document.cookie.match("pickAColorSavedColors-allSavedColors=")){var C=document.cookie.split(";");t.each(C,function(t){C[t].match("pickAColorSavedColors-allSavedColors=")&&(f=C[t].split("=")[1].split(","))})}}var m={initialize:function(o){var e,a,n=t(this);n.attr("name")||n.attr("name","pick-a-color-"+o),a=n.attr("name"),n.addClass("pick-a-color"),g.defaultColor=tinycolor(n.val()).toHex(),g.typedColor=g.defaultColor,n.val(g.defaultColor),t(n).wrap('<div class="input-prepend input-append pick-a-color-markup" id="'+a+'">'),e=t(n.parent()),p.showHexInput?e.prepend('<span class="hex-pound add-on">#</span>').append(h()):e.append(h()),p.showHexInput||n.attr("type","hidden")},updatePreview:function(t){g.typedColor=tinycolor(t.val()).toHex(),t.siblings(".btn-group").find(".current-color").css("background-color","#"+g.typedColor)},pressPreviewButton:function(){var t=arguments[0].thisEvent;t.stopPropagation(),m.toggleDropdown(t.target)},openDropdown:function(o,a){t(".color-menu").each(function(){var o=t(this);if("block"===o.css("display")){var e=o.parents(".btn-group");m.closeDropdown(e,o)}}),p.fadeMenuToggle&&!e?t(a).fadeIn("fast"):t(a).show(),t(o).addClass("open")},closeDropdown:function(o,a){p.fadeMenuToggle&&!e?t(a).fadeOut("fast"):t(a).css("display","none"),t(o).removeClass("open")},closeDropdownIfOpen:function(){var t=arguments[0].button,o=arguments[0].menu;"block"===o.css("display")&&m.closeDropdown(t,o)},toggleDropdown:function(o){var e=t(o).parents(".pick-a-color-markup"),a=e.find(".btn-group"),n=e.find(".color-menu");"none"===n.css("display")?m.openDropdown(a,n):m.closeDropdown(a,n)},tabbable:function(){var o=t(this),e=o.parents(".pick-a-color-markup");o.click(function(){var o=t(this),a=o.attr("class").split(" ")[0].split("-")[0]+"-content",n=o.parents(".dropdown-menu").find("."+a);o.hasClass("tab-active")||(e.find(".tab-active").removeClass("tab-active"),e.find(".active-content").removeClass("active-content").addClass("inactive-content"),o.addClass("tab-active"),t(n).addClass("active-content").removeClass("inactive-content"))})},getColorMultiplier:function(o,a,n){var s="basic"===n?parseInt(t(".color-box").first().width(),10):parseInt(t(".advanced-list").find(".color-box").first().width(),10);0===s&&(s="basic"===n?e?160:200:e?160:300);var r=s/2,i=a/s;return"bidirectional"===o?.5>=i?(1-a/r)/2:-((a-r)/r)/2:"darkenRight"===o?-(i/2):i/2},modifyHSLLightness:function(t,o){var e=t;return e.l+=o,e.l=Math.min(Math.max(0,e.l),1),tinycolor(e).toHslString()},getMoveableArea:function(t){var o={},e=t.parent(),a=t.outerWidth(),n=e.width(),s=e.offset();return o.minX=s.left,o.maxX=n-a,o},moveHighlightBand:function(o,a,n){var s=t(".highlight-band").first().outerWidth(),r=.75*s,i=e?n.originalEvent.pageX:n.pageX,l=i-a.minX-r;l=Math.max(0,Math.min(l,a.maxX)),o.css("position","absolute"),o.css("left",l)},horizontallyDraggable:function(){t(this).on(s,function(o){o.preventDefault();var e=t(o.delegateTarget);e.css("cursor","-webkit-grabbing"),e.css("cursor","-moz-grabbing");var a=m.getMoveableArea(e);t(document).on(r,function(t){e.trigger(d),m.moveHighlightBand(e,a,t)}).on(i,function(){t(document).off(r),t(document).off(d),e.css("cursor","-webkit-grab"),e.css("cursor","-moz-grab"),e.trigger(c),t(document).off(i)})}).on(i,function(o){o.stopPropagation(),t(document).off(r),t(document).off(d)})},modifyHighlightBand:function(t,o,e){var a={h:0,s:0,l:.05},n={h:0,s:0,l:.5},s=-o,r=t.find(".highlight-band-stripe"),i="lightenRight"===e?m.modifyHSLLightness(n,s):m.modifyHSLLightness(a,s);t.css("border-color",i),r.css("background-color",i)},calculateHighlightedColor:function(){var o,e,a,n,s,r,i,l,d=t(this),c=d.parent(),u=t(".highlight-band").first().outerWidth(),h=u/2,g=arguments[0].type;if("basic"===g){var v=c.attr("class").split("-")[2],f=p.basicColors[v];switch(e=tinycolor(f).toHsl(),f){case"fff":o="darkenRight";break;case"000":o="lightenRight";break;default:o="bidirectional"}}else{var C=d.parents(".advanced-list");n=arguments[0].hsl.s,i=C.find(".spectrum-hue"),a=arguments[0].hsl.h,r=C.find(".spectrum-saturation"),l=C.find(".lightness-value"),s=C.find(".color-preview"),e={h:arguments[0].hsl.h,l:.5,s:arguments[0].hsl.s},o="bidirectional"}var b=parseInt(d.css("left"),10)+h,w=m.getColorMultiplier(o,b,g),S=m.modifyHSLLightness(e,w),y="#"+tinycolor(S).toHex(),k=S.split("(")[1].split(")")[0].split(",")[2],x=parseInt(k.split("%")[0],10)/100;return"basic"===g?(c.siblings(".color-preview").css("background-color",y),c.prev(".color-label").replaceWith('<button class="color-select btn btn-mini" type="button">Select</button>'),"darkenRight"!==o&&m.modifyHighlightBand(d,w,o)):(s.css("background-color",y),l.text(k),m.updateSaturationStyles(r,a,x),m.updateHueStyles(i,n,x),m.modifyHighlightBand(t(".advanced-content .highlight-band"),w,o)),"basic"===g?tinycolor(S).toHex():x},updateSavedColorPreview:function(o){t.each(o,function(e){var a=t(o[e]),n=a.attr("class");a.find(".color-preview").css("background-color",n)})},updateSavedColorMarkup:function(o,e){if(e=e?e:f,p.showSavedColors&&e.length>0){p.saveColorsPerElement||(o=t(".savedColors-content"),e=f);var a=v.rowsInDropdown*v.maxColsInDropdown;e=e.slice(0,a);var n=t("<ul>").addClass("saved-color-col 0"),s=t("<ul>").addClass("saved-color-col 1");t.each(e,function(o,e){var a=t("<li>").addClass("color-item"),r=t("<a>").addClass(e);r.append(t("<span>").addClass("color-preview")),r.append(t("<span>").addClass("color-label").text(e)),a.append(r),0===o%2?n.append(a):s.append(a)}),o.html(n),o.append(s);var r=t(o).find("a");m.updateSavedColorPreview(r)}},setSavedColorsCookie:function(t,o){var e=new Date,a=31536e7,n=new Date(e.getTime()+a);n=n.toGMTString(),document.cookie="undefined"==typeof o?"pickAColorSavedColors-allSavedColors="+t+";expires="+n:"pickAColorSavedColors-"+o+"="+t+"; expires="+n},saveColorsToLocalStorage:function(t,o){if(a)if("undefined"==typeof o)try{localStorage.allSavedColors=JSON.stringify(t)}catch(e){localStorage.clear()}else try{localStorage["pickAColorSavedColors-"+o]=JSON.stringify(t)}catch(e){localStorage.clear()}else m.setSavedColorsCookie(t,o)},removeFromArray:function(o,e){-1!==t.inArray(e,o)&&o.splice(t.inArray(e,o),1)},updateSavedColors:function(t,o,e){m.removeFromArray(o,t),o.unshift(t),m.saveColorsToLocalStorage(o,e)},addToSavedColors:function(t,o,e){if(p.showSavedColors)if("#"!=t[0]&&(t="#"+t),m.updateSavedColors(t,f),p.saveColorsPerElement){var a=o.colors,n=o.dataAttr;m.updateSavedColors(t,a,n),m.updateSavedColorMarkup(e,a)}else m.updateSavedColorMarkup(e,f)},selectFromBasicColors:function(){var o=t(this).find("span:first").css("background-color"),e=arguments[0].els,a=arguments[0].savedColorsInfo;o=tinycolor(o).toHex(),t(e.thisEl).val(o),t(e.thisEl).trigger("change"),m.updatePreview(e.thisEl),m.addToSavedColors(o,a,e.savedColorsContent),m.closeDropdown(e.colorPreviewButton,e.colorMenu)},tapSpectrum:function(){var o=arguments[0].thisEvent,a=arguments[0].savedColorsInfo,n=arguments[0].els,s=arguments[0].mostRecentClick;o.stopPropagation();var r=t(this).find(".highlight-band"),i=m.getMoveableArea(r);e?m.moveHighlightBand(r,i,s):m.moveHighlightBand(r,i,o);var l=m.calculateHighlightedColor.apply(r,[{type:"basic"}]);m.addToSavedColors(l,a,n.savedColorsContent),n.touchInstructions.html("Press 'select' to choose this color")},executeUnlessScrolled:function(){var o,a,n=arguments[0].thisFunction,r=arguments[0].theseArguments;t(this).on(s,function(e){o=t(window).scrollTop(),a=e}).on(l,function(s){var i=o-t(window).scrollTop();return e&&Math.abs(i)>0?!1:(r.thisEvent=s,r.mostRecentClick=a,n.apply(t(this),[r]),void 0)})},updateSaturationStyles:function(o,e,a){var s=(100*a).toString()+"%",r="#"+tinycolor("hsl("+e+",0%,"+s).toHex(),i="#"+tinycolor("hsl("+e+",50%,"+s).toHex(),l="#"+tinycolor("hsl("+e+",100%,"+s).toHex(),d="",c=(t.each(["-webkit-linear-gradient","-o-linear-gradient"],function(t,o){d+="background-image: "+o+"(left, "+r+" 0%, "+i+" 50%, "+l+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+r+"', endColorstr='"+i+"', GradientType=1)"),p="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)";if(d="background-image: -moz-linear-gradient(left center, "+r+" 0%, "+i+" 50%, "+l+" 100%);"+"background-image: linear-gradient(to right, "+r+" 0%, "+i+" 50%, "+l+" 100%); "+"background-image: -webkit-gradient(linear, left top, right top,"+"color-stop(0, "+r+"),"+"color-stop(0.5, "+i+"),"+"color-stop(1, "+l+"));"+d,n){var u=t(o).find(".saturation-spectrum-0"),h=t(o).find(".saturation-spectrum-1");u.css("filter",c),h.css("filter",p)}else o.attr("style",d)},updateLightnessStyles:function(o,e,a){var s=(100*a).toString()+"%",r="#"+tinycolor("hsl("+e+","+s+",100%)").toHex(),i="#"+tinycolor("hsl("+e+","+s+",50%)").toHex(),l="#"+tinycolor("hsl("+e+","+s+",0%)").toHex(),d="",c=(t.each(["-webkit-linear-gradient","-o-linear-gradient"],function(t,o){d+="background-image: "+o+"(left, "+r+" 0%, "+i+" 50%, "+l+" 100%);"}),"progid:DXImageTransform.Microsoft.gradient(startColorstr='"+r+"', endColorstr='"+i+"', GradientType=1)"),p="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)";if(d="background-image: -moz-linear-gradient(left center, "+r+" 0%, "+i+" 50%, "+l+" 100%); "+"background-image: linear-gradient(to right, "+r+" 0%, "+i+" 50%, "+l+" 100%); "+"background-image: -webkit-gradient(linear, left top, right top,"+" color-stop(0, "+r+"),"+" color-stop(0.5, "+i+"),"+" color-stop(1, "+l+")); "+d,n){var u=t(o).find(".lightness-spectrum-0"),h=t(o).find(".lightness-spectrum-1");u.css("filter",c),h.css("filter",p)}else o.attr("style",d)},updateHueStyles:function(o,e,a){var s=(100*e).toString()+"%",r=(100*a).toString()+"%",i="#"+tinycolor("hsl(0,"+s+","+r+")").toHex(),l="#"+tinycolor("hsl(60,"+s+","+r+")").toHex(),d="#"+tinycolor("hsl(120,"+s+","+r+")").toHex(),c="#"+tinycolor("hsl(180,"+s+","+r+")").toHex(),p="#"+tinycolor("hsl(240,"+s+","+r+")").toHex(),u="#"+tinycolor("hsl(300,"+s+","+r+")").toHex(),h="#"+tinycolor("hsl(0,"+s+","+r+")").toHex(),g="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+i+"', endColorstr='"+l+"', GradientType=1)",v="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+l+"', endColorstr='"+d+"', GradientType=1)",f="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+d+"', endColorstr='"+c+"', GradientType=1)",C="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+c+"', endColorstr='"+p+"', GradientType=1)",m="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+p+"', endColorstr='"+u+"', GradientType=1)",b="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+u+"', endColorstr='"+h+"', GradientType=1)",w="";if(t.each(["-webkit-linear-gradient","-o-linear-gradient"],function(t,o){w+="background-image: "+o+"(left, "+i+" 0%, "+l+" 17%, "+d+" 24%, "+c+" 51%, "+p+" 68%, "+u+" 85%, "+h+" 100%);"}),w+="background-image: -webkit-gradient(linear, left top, right top,color-stop(0%, "+i+"),"+"color-stop(17%, "+l+"),"+"color-stop(34%, "+d+"),"+"color-stop(51%, "+c+"),"+"color-stop(68%, "+p+"),"+"color-stop(85%, "+u+"),"+"color-stop(100%, "+h+"));"+"background-image: linear-gradient(to right, "+i+" 0%, "+l+" 17%, "+d+" 24%,"+c+" 51%,"+p+" 68%,"+u+" 85%,"+h+" 100%); "+"background-image: -moz-linear-gradient(left center, "+i+" 0%, "+l+" 17%, "+d+" 24%, "+c+" 51%, "+p+" 68%, "+u+" 85%, "+h+" 100%);",n){var S=t(o).find(".hue-spectrum-0"),y=t(o).find(".hue-spectrum-1"),k=t(o).find(".hue-spectrum-2"),x=t(o).find(".hue-spectrum-3"),H=t(o).find(".hue-spectrum-4"),A=t(o).find(".hue-spectrum-5");S.css("filter",g),y.css("filter",v),k.css("filter",f),x.css("filter",C),H.css("filter",m),A.css("filter",b)}else o.attr("style",w)},getHighlightedHue:function(){var o=t(this),a=o.outerWidth(),n=a/2,s=parseInt(o.css("left"),10)+n,r=o.parents(".advanced-list"),i=r.find(".color-preview"),l=r.find(".spectrum-lightness"),d=r.find(".spectrum-saturation"),c=parseInt(r.find(".color-box").first().width(),10),p=r.find(".hue-value"),u=arguments[0].l,h=arguments[0].s,g=(100*h).toString()+"%",v=(100*u).toString()+"%";0===c&&(c=e?160:300);var f=Math.floor(360*(s/c)),C="hsl("+f+","+g+","+v+")";return C="#"+tinycolor(C).toHex(),i.css("background-color",C),p.text(f),m.updateLightnessStyles(l,f,h),m.updateSaturationStyles(d,f,u),f},getHighlightedSaturation:function(){var o=t(this),a=o.outerWidth(),n=a/2,s=parseInt(o.css("left"),10)+n,r=o.parents(".advanced-list"),i=r.find(".color-preview"),l=r.find(".spectrum-lightness"),d=r.find(".spectrum-hue"),c=r.find(".saturation-value"),p=parseInt(r.find(".color-box").first().width(),10),u=arguments[0].l,h=(100*u).toString()+"%",g=arguments[0].h;0===p&&(p=e?160:300);var v=s/p,f=Math.round(100*v).toString()+"%",C="hsl("+g+","+f+","+h+")";return C="#"+tinycolor(C).toHex(),i.css("background-color",C),c.text(f),m.updateLightnessStyles(l,g,v),m.updateHueStyles(d,v,u),v},updateAdvancedInstructions:function(t){t.html("Press the color preview to choose this color")}};return this.each(function(o){m.initialize.apply(this,[o]);var e,n,s={thisEl:t(this),thisWrapper:t(this).parent(),colorTextInput:t(this).find("input"),colorMenuLinks:t(this).parent().find(".color-menu li a"),colorPreviewButton:t(this).parent().find(".btn-group"),colorMenu:t(this).parent().find(".color-menu"),colorSpectrums:t(this).parent().find(".color-box"),basicSpectrums:t(this).parent().find(".basicColors-content .color-box"),touchInstructions:t(this).parent().find(".color-menu-instructions"),advancedInstructions:t(this).parent().find(".advanced-instructions"),highlightBands:t(this).parent().find(".highlight-band"),basicHighlightBands:t(this).parent().find(".basicColors-content .highlight-band")};if(u&&(s.tabs=s.thisWrapper.find(".tab")),p.showSavedColors&&(s.savedColorsContent=s.thisWrapper.find(".savedColors-content"),p.saveColorsPerElement))if(n={colors:[],dataObj:t(this).data()},t.each(n.dataObj,function(t){n.dataAttr=t}),a&&localStorage["pickAColorSavedColors-"+n.dataAttr])n.colors=JSON.parse(localStorage["pickAColorSavedColors-"+n.dataAttr]);else if(document.cookie.match("pickAColorSavedColors-"+n.dataAttr))for(var r=document.cookie.split(";"),h=0;h<r.length;h++)r[h].match(n.dataAttr)&&(n.colors=r[h].split("=")[1].split(","));else n.colors=f;p.showAdvanced&&(e={h:0,s:1,l:.5},s.advancedSpectrums=s.thisWrapper.find(".advanced-list").find(".color-box"),s.advancedHighlightBands=s.thisWrapper.find(".advanced-list").find(".highlight-band"),s.hueSpectrum=s.thisWrapper.find(".spectrum-hue"),s.lightnessSpectrum=s.thisWrapper.find(".spectrum-lightness"),s.saturationSpectrum=s.thisWrapper.find(".spectrum-saturation"),s.hueHighlightBand=s.thisWrapper.find(".spectrum-hue .highlight-band"),s.lightnessHighlightBand=s.thisWrapper.find(".spectrum-lightness .highlight-band"),s.saturationHighlightBand=s.thisWrapper.find(".spectrum-saturation .highlight-band"),s.advancedPreview=s.thisWrapper.find(".advanced-content .color-preview")),m.addToSavedColors(g.defaultColor,n,s.savedColorsContent),m.updatePreview(s.thisEl),s.thisEl.focus(function(){var o=t(this);g.typedColor=o.val(),o.val(""),m.toggleDropdown(s.colorPreviewButton,s.ColorMenu)}).blur(function(){var o=t(this);g.newValue=o.val(),g.newValue.match(/^\s+$|^$/)?o.val(g.typedColor):(g.newValue=tinycolor(g.newValue).toHex(),o.val(g.newValue),m.addToSavedColors(g.newValue,n,s.savedColorsContent)),m.updatePreview(o)}),m.executeUnlessScrolled.apply(s.colorPreviewButton,[{thisFunction:m.pressPreviewButton,theseArguments:{}}]),m.executeUnlessScrolled.apply(t(document),[{thisFunction:m.closeDropdownIfOpen,theseArguments:{button:s.colorPreviewButton,menu:s.colorMenu}}]),s.colorMenu.on(l,function(t){t.stopPropagation()}),s.thisEl.on(l,function(t){t.stopPropagation()}),m.executeUnlessScrolled.apply(s.colorMenuLinks,[{thisFunction:m.selectFromBasicColors,theseArguments:{els:s,savedColorsInfo:n}}]),u&&m.tabbable.apply(s.tabs),(p.showSpectrum||p.showAdvanced)&&m.horizontallyDraggable.apply(s.highlightBands),p.showSpectrum&&(m.executeUnlessScrolled.apply(s.basicSpectrums,[{thisFunction:m.tapSpectrum,theseArguments:{savedColorsInfo:n,els:s}}]),t(s.basicHighlightBands).on(d,function(t){t.target,m.calculateHighlightedColor.apply(this,[{type:"basic"}])}).on(c,function(t){var o=t.delegateTarget,e=m.calculateHighlightedColor.apply(o,[{type:"basic"}]);m.addToSavedColors(e,n,s.savedColorsContent)})),p.showAdvanced&&(t(s.hueHighlightBand).on(d,function(){e.h=m.getHighlightedHue.apply(this,[e])}),t(s.lightnessHighlightBand).on(d,function(){m.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:e}])}).on(i,function(){e.l=m.calculateHighlightedColor.apply(this,[{type:"advanced",hsl:e}])}),t(s.saturationHighlightBand).on(d,function(){m.getHighlightedSaturation.apply(this,[e])}).on(c,function(){e.s=m.getHighlightedSaturation.apply(this,[e])}),t(s.advancedHighlightBand).on(c,function(){m.updateAdvancedInstructions(s.advancedInstructions)}),t(s.lightnessSpectrum).click(function(o){o.stopPropagation();var a=t(this).find(".highlight-band"),n=m.getMoveableArea(a);m.moveHighlightBand(a,n,o),e.l=m.calculateHighlightedColor.apply(a,[{type:"advanced",hsl:e}])}),t(s.hueSpectrum).click(function(o){o.stopPropagation();var a=t(this).find(".highlight-band"),n=m.getMoveableArea(a);m.moveHighlightBand(a,n,o),e.h=m.getHighlightedHue.apply(a,[e])}),t(s.saturationSpectrum).click(function(o){o.stopPropagation();var a=t(this).find(".highlight-band"),n=m.getMoveableArea(a);m.moveHighlightBand(a,n,o),e.s=m.getHighlightedSaturation.apply(a,[e])}),t(s.advancedSpectrums).click(function(){m.updateAdvancedInstructions(s.advancedInstructions)}),t(s.advancedPreview).click(function(){var o=tinycolor(t(this).css("background-color")).toHex();t(s.thisEl).val(o),t(s.thisEl).trigger("change"),m.updatePreview(s.thisEl),m.addToSavedColors(o,n,s.savedColorsContent),m.closeDropdown(s.colorPreviewButton,s.colorMenu)})),p.showSavedColors&&(t(s.savedColorsContent).click(function(o){var e=t(o.target);if(e.is("SPAN")||e.is("A")){var a=e.is("SPAN")?e.parent().attr("class").split("#")[1]:e.attr("class").split("#")[1];t(s.thisEl).val(a),t(s.thisEl).trigger("change"),m.updatePreview(s.thisEl),m.closeDropdown(s.colorPreviewButton,s.colorMenu),m.addToSavedColors(a,n,s.savedColorsContent)}}),p.saveColorsPerElement?p.saveColorsPerElement&&m.updateSavedColorMarkup(s.savedColorsContent,n.colors):m.updateSavedColorMarkup(s.savedColorsContent,f))})}}(jQuery);